<!doctype html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorate="~{layout}">

<th:block layout:fragment="pagetitle">
  <!--page title-->
  <div th:replace="~{partials/title-meta :: title-meta('Student Certificate List')}"></div>
</th:block>

<head>
  <!-- Sweet Alert css-->
  <link th:href="@{/assets/libs/sweetalert2/sweetalert2.min.css}" rel="stylesheet" type="text/css" />
</head>

<body>
<div layout:fragment="content">
  <div th:replace="~{partials/page-title :: page-title('Student Certificate List','Certificate')}"></div>

  <div class="row">
    <!-- Danger Alert -->
    <div class="alert alert-danger alert-dismissible fade show" role="alert" th:if="${msg_error}">
      <b th:text="${msg_error}">Dismissible danger Alert </b>
      <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>

    <!-- Success Alert -->
    <div class="alert alert-success alert-dismissible fade show" role="alert" th:if="${msg_success}">
      <b th:text="${msg_success}"></b>
      <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
  </div>

  <div class="row">
    <div class="col-lg-12">
      <div class="card" id="tasksList">
        <div class="card-header border-0">
          <div class="d-flex align-items-center">
            <h5 class="card-title mb-0 flex-grow-1">All Student Certificates</h5>
          </div>
        </div>
        <div class="card-body border border-dashed border-end-0 border-start-0">
          <div class="mb-2 d-flex gap-2 justify-content-end align-items-center">
            <input class="form-control" type="text" id="search-box" placeholder="Search..." style="min-width: 0; flex: 1 1 auto;">
            <a th:href="@{/admin/course/create}" class="btn btn-success waves-effect waves-light text-nowrap">
              Search
            </a>
          </div>
        </div>
        <!--end card-body-->
        <div class="card-body">
          <div class="table-responsive table-card mb-4">
            <table class="table align-middle table-nowrap mb-0" id="tasksTable">
              <thead class="table-light text-muted">
              <tr>
                <th scope="col" style="width: 40px;">
                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="checkAll" value="option">
                  </div>
                </th>
                <th class="sort" data-sort="id">ID</th>
                <th class="sort" data-sort="course_name">Course Name</th>
                <th class="sort" data-sort="student_name">Student Name</th>
                <th class="sort" data-sort="email">Email</th>
                <th class="sort" data-sort="process">Process</th>
                <th class="sort" data-sort="download">Download Link</th>
                <th>Remove</th>
              </tr>
              </thead>
              <tbody class="list form-check-all">
<!--              sample data-->
              <tr th:each="cf : ${courseCertificates}">
                <th scope="row">
                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" name="chk_child" value="option1">
                  </div>
                </th>
                <td class="id"><span class="fw-medium" th:text="${cf.id}">#ID</span></td>
                <td class="course_name">
                  <a th:href="@{/admin/course/{courseId}(courseId=${cf.courseStudentIdCourseIdId})}" class="fw-medium link-primary" th:text="${cf.courseStudentIdCourseIdName}">Course 1</a>
                </td>
                <td>
                  <div class="d-flex">
                    <div class="flex-grow-1 student_username">
                      <a th:href="@{/admin/student/{studentId}(studentId=${cf.courseStudentIdStudentIdId})}" th:text="${cf.courseStudentIdStudentIdUserIdUsername}">Student username</a>
                    </div>
                  </div>
                </td>
                <td class="student_email" th:text="${cf.courseStudentIdStudentIdUserIdEmail}">abc@example.com</td>
                <td class="status"><span class="badge badge-soft-secondary text-uppercase" th:text="${cf.courseStudentIdProgress}">100%</span></td>
                <td class="assignedto">
                  <div class="download-link d-flex justify-content-center align-items-center center">
                    <a th:href="${cf.downloadLink}" target="_blank"
                       class="avatar-group-item"
                       data-bs-toggle="tooltip"
                       data-bs-trigger="hover"
                       data-bs-placement="top">
                      <i class="ri-download-cloud-2-line"></i>
                    </a>
                  </div>
                </td>
                <td>
                  <div class="flex-shrink-0 ms-4">
                    <a class="remove-item-btn" data-bs-toggle="modal" href="#deleteOrder">
                      <i class="ri-delete-bin-fill align-bottom me-2 text-muted"></i>
                    </a>
                  </div>
                </td>
              </tr>
<!--              end sample data-->
              </tbody>
            </table>
            <!--end table-->
            <div class="noresult" style="display: none">
              <div class="text-center">
                <lord-icon src="https://cdn.lordicon.com/msoeawqm.json" trigger="loop" colors="primary:#25a0e2,secondary:#00bd9d" style="width:75px;height:75px"></lord-icon>
                <h5 class="mt-2">Sorry! No Result Found</h5>
                <p class="text-muted mb-0">We've searched more than 200k+ certificates, but We did not find any certificate for you search.</p>
              </div>
            </div>
          </div>
        </div>
        <!--end card-body-->
      </div>
      <!--end card-->
    </div>
    <!--end col-->
  </div>
  <!--end row-->

  <div class="row g-0 text-center text-sm-start align-items-center mb-3">
    <div class="col-sm-6">
      <div>
        <p class="mb-sm-0"
           th:text="'Showing ' + ${startIndex} + ' to ' + ${endIndex} + ' of ' + ${totalItems} + ' entries'"></p>
      </div>
    </div>
    <div class="col-sm-6">
      <ul class="pagination pagination-separated justify-content-center justify-content-sm-end mb-sm-0"
          th:if="${totalItems > 0}">

        <!-- Previous -->
        <li class="page-item" th:classappend="${currentPage <= 1} ? 'disabled'">
          <a class="page-link"
             th:href="@{'/admin/courses?page=' + (${currentPage - 1}) + '&name=' + ${filterName}}"
             th:ariaDisabled="${currentPage <= 1}" tabindex="-1">
            <i class="mdi mdi-chevron-left"></i>
          </a>
        </li>

        <!-- Pages -->
        <li class="page-item"
            th:each="page : ${#numbers.sequence(1, totalPages)}"
            th:classappend="${page == currentPage} ? 'active'">
          <a class="page-link"
             th:href="@{'/admin/courses?page=' + ${page} + '&name=' + ${filterName}}"
             th:text="${page}">1</a>
        </li>

        <!-- Next -->
        <li class="page-item" th:classappend="${currentPage >= totalPages} ? 'disabled'">
          <a class="page-link"
             th:href="@{'/admin/courses?page=' + (${currentPage + 1}) + '&name=' + ${filterName}}"
             th:ariaDisabled="${currentPage >= totalPages}" tabindex="-1">
            <i class="mdi mdi-chevron-right"></i>
          </a>
        </li>
      </ul>
    </div>
  </div>

  <div class="modal fade flip" id="deleteOrder" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-body p-5 text-center">
          <lord-icon src="https://cdn.lordicon.com/gsqxdxog.json" trigger="loop" colors="primary:#25a0e2,secondary:#00bd9d" style="width:90px;height:90px"></lord-icon>
          <div class="mt-4 text-center">
            <h4>You are about to delete a task ?</h4>
            <p class="text-muted fs-14 mb-4">Deleting your task will remove all of
              your information from our database.</p>
            <div class="hstack gap-2 justify-content-center remove">
              <button class="btn btn-link btn-ghost-primary fw-medium text-decoration-none" id="deleteRecord-close" data-bs-dismiss="modal"><i class="ri-close-line me-1 align-middle"></i> Close</button>
              <button class="btn btn-primary" id="delete-record">Yes, Delete It</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!--end delete modal -->
</div>


<th:block layout:fragment="modal">

</th:block>

<th:block layout:fragment="pagejs">

  <!-- titcket init js -->
  <script th:src="@{/assets/js/certificate-list.init.js}"></script>

  <!-- Sweet Alerts js -->
  <script th:src="@{/assets/libs/sweetalert2/sweetalert2.min.js}"></script>
</th:block>
</body>

</html>